<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>å‘½ä»¤è¾“å…¥æµ‹è¯•</title>
</head>
<body style="background: #1a1a1a; color: #fff; font-family: monospace; padding: 20px;">
  <h2>ğŸ’¬ è¾“å…¥å‘½ä»¤æµ‹è¯•</h2>
  
  <input type="text" id="cmdInput" style="width: 500px; padding: 12px; font-size: 16px; border-radius: 5px; border: 1px solid #333;" placeholder="è¾“å…¥å‘½ä»¤...">
  <button onclick="execute()" style="padding: 12px 24px; font-size: 16px; background: #238636; color: #fff; border: none; border-radius: 5px; cursor: pointer;">æ‰§è¡Œ</button>
  
  <div style="margin-top: 15px;">
    <button onclick="setCmd('mkdir test1')" style="padding: 5px 10px; margin: 3px; cursor: pointer;">mkdir test1</button>
    <button onclick="setCmd('mkdir æ–‡ä»¶å¤¹å')" style="padding: 5px 10px; margin: 3px; cursor: pointer;">mkdir ä¸­æ–‡å</button>
    <button onclick="setCmd('åˆ›å»ºæ–‡ä»¶å¤¹ abc')" style="padding: 5px 10px; margin: 3px; cursor: pointer;">åˆ›å»ºæ–‡ä»¶å¤¹ abc</button>
    <button onclick="setCmd('dir')" style="padding: 5px 10px; margin: 3px; cursor: pointer;">dir (åˆ—å‡ºæ–‡ä»¶)</button>
  </div>
  
  <pre id="output" style="background: #0d0d0d; padding: 15px; margin-top: 20px; border-radius: 5px; white-space: pre-wrap; min-height: 100px;"></pre>
  
  <script>
    function setCmd(text) {
      document.getElementById('cmdInput').value = text;
    }
    
    async function execute() {
      const cmd = document.getElementById('cmdInput').value.trim();
      if (!cmd) return;
      
      const output = document.getElementById('output');
      output.textContent = '$ ' + cmd + '\n\næ‰§è¡Œä¸­...';
      
      try {
        const res = await fetch('/api/execute', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({command: cmd})
        });
        const data = await res.json();
        
        let text = '';
        if (data.success) {
          text = 'âœ… æˆåŠŸ!\n';
          text += 'è¾“å‡º: ' + (data.output || '(ç©º)');
        } else {
          text = 'âŒ å¤±è´¥\n';
          text += 'é”™è¯¯: ' + (data.error || 'æœªçŸ¥');
        }
        output.textContent = '$ ' + cmd + '\n\n' + text;
      } catch (e) {
        output.textContent = '$ ' + cmd + '\n\nâŒ ç½‘ç»œé”™è¯¯: ' + e.message;
      }
    }
    
    document.getElementById('cmdInput').addEventListener('keydown', (e) => {
      if (e.key === 'Enter') execute();
    });
  </script>
</body>
</html>
