<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æµ‹è¯•å‘½ä»¤ - AImum</title>
  <style>
    body {
      font-family: monospace;
      background: #0d1117;
      color: #c9d1d9;
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
    }
    h1 { color: #58a6ff; }
    .test-btn {
      background: #238636;
      color: white;
      border: none;
      padding: 10px 20px;
      margin: 5px;
      cursor: pointer;
      border-radius: 6px;
      font-size: 14px;
    }
    .test-btn:hover { background: #2ea043; }
    #result {
      background: #161b22;
      padding: 15px;
      border-radius: 6px;
      margin-top: 20px;
      white-space: pre-wrap;
      min-height: 100px;
    }
    .cmd { color: #d2a8ff; }
    .success { color: #3fb950; }
    .error { color: #f85149; }
  </style>
</head>
<body>
  <h1>ğŸ§ª å‘½ä»¤æ‰§è¡Œæµ‹è¯•</h1>
  
  <h3>å¿«é€Ÿæµ‹è¯•ï¼š</h3>
  <button class="test-btn" onclick="run('node -v')">æµ‹è¯• node -v</button>
  <button class="test-btn" onclick="run('pwd')">æµ‹è¯• pwd</button>
  <button class="test-btn" onclick="run('ls -la')">æµ‹è¯• ls -la</button>
  <button class="test-btn" onclick="run('whoami')">æµ‹è¯• whoami</button>
  
  <h3>ä¸­æ–‡æµ‹è¯•ï¼š</h3>
  <button class="test-btn" onclick="run('åˆ›å»ºæ–‡ä»¶å¤¹ test')">åˆ›å»ºæ–‡ä»¶å¤¹ test</button>
  <button class="test-btn" onclick="run('åˆ›å»ºæ–‡ä»¶ test.txt')">åˆ›å»ºæ–‡ä»¶ test.txt</button>
  
  <h3>æ‰‹åŠ¨è¾“å…¥ï¼š</h3>
  <input type="text" id="cmdInput" style="width: 400px; padding: 8px;" placeholder="è¾“å…¥å‘½ä»¤...">
  <button class="test-btn" onclick="run(document.getElementById('cmdInput').value)">æ‰§è¡Œ</button>
  
  <h3>ç»“æœï¼š</h3>
  <div id="result" class="cmd">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æµ‹è¯•...</div>
  
  <script>
    async function run(cmd) {
      if (!cmd.trim()) return;
      const result = document.getElementById('result');
      result.innerHTML = `<span class="cmd">$ ${cmd}</span>\n\n`;
      result.innerHTML += `<span style="color: #8b949e;">æ‰§è¡Œä¸­...</span>`;
      
      try {
        const res = await fetch('/api/execute', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ command: cmd })
        });
        const data = await res.json();
        
        if (data.parsedCommand) {
          result.innerHTML += `\n<span style="color: #8b949e;">è§£æä¸º: ${data.parsedCommand}</span>\n`;
        }
        
        if (data.success) {
          result.innerHTML += `<span class="success">âœ… æˆåŠŸ!</span>\n\n`;
          result.innerHTML += data.output || '(æ— è¾“å‡º)';
        } else {
          result.innerHTML += `<span class="error">âŒ å¤±è´¥!</span>\n`;
          result.innerHTML += data.error || 'æœªçŸ¥é”™è¯¯';
        }
      } catch (e) {
        result.innerHTML += `<span class="error">âŒ ç½‘ç»œé”™è¯¯: ${e.message}</span>`;
      }
    }
  </script>
</body>
</html>
