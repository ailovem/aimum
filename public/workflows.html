<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AImum - å·¥ä½œæµå¼•æ“</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
      --primary: #667eea;
      --bg: #0f0f23;
      --card: #1a1a2e;
      --card-hover: #252542;
      --text: #e2e8f0;
      --text-dim: #a0aec0;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --border: rgba(255,255,255,0.1);
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
    }
    
    header {
      padding: 40px 20px;
      margin-bottom: 30px;
    }
    
    h1 {
      font-size: 36px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .subtitle {
      color: var(--text-dim);
    }
    
    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 20px;
    }
    
    .tab {
      padding: 12px 24px;
      background: transparent;
      border: none;
      color: var(--text-dim);
      cursor: pointer;
      border-radius: 12px;
      font-size: 14px;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .tab:hover {
      background: var(--card-hover);
    }
    
    .tab.active {
      background: var(--primary);
      color: white;
    }
    
    .toolbar {
      display: flex;
      gap: 15px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }
    
    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.2s;
    }
    
    .btn-primary {
      background: var(--primary);
      color: white;
    }
    
    .btn-primary:hover {
      background: #5a67d8;
    }
    
    .btn-secondary {
      background: var(--card);
      color: var(--text);
      border: 1px solid var(--border);
    }
    
    .btn-secondary:hover {
      background: var(--card-hover);
    }
    
    .btn-success {
      background: var(--success);
      color: white;
    }
    
    .search-input {
      flex: 1;
      min-width: 200px;
      padding: 12px 20px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      color: var(--text);
      font-size: 14px;
    }
    
    .search-input:focus {
      outline: none;
      border-color: var(--primary);
    }
    
    /* å·¥ä½œæµå¡ç‰‡ */
    .workflows-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 20px;
    }
    
    .workflow-card {
      background: var(--card);
      border-radius: 20px;
      padding: 24px;
      border: 1px solid var(--border);
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .workflow-card:hover {
      border-color: var(--primary);
      transform: translateY(-4px);
    }
    
    .workflow-header {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      margin-bottom: 16px;
    }
    
    .workflow-icon {
      width: 56px;
      height: 56px;
      background: linear-gradient(135deg, var(--primary), #764ba2);
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      flex-shrink: 0;
    }
    
    .workflow-info {
      flex: 1;
    }
    
    .workflow-name {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    
    .workflow-desc {
      font-size: 13px;
      color: var(--text-dim);
      margin-bottom: 12px;
    }
    
    .workflow-badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 600;
    }
    
    .workflow-badge.enabled {
      background: rgba(16, 185, 129, 0.2);
      color: var(--success);
    }
    
    .workflow-badge.disabled {
      background: rgba(255,255,255,0.1);
      color: var(--text-dim);
    }
    
    .workflow-steps {
      display: flex;
      align-items: center;
      margin-top: 16px;
      padding-top: 16px;
      border-top: 1px solid var(--border);
      gap: 8px;
      flex-wrap: wrap;
    }
    
    .step-preview {
      display: flex;
      align-items: center;
    }
    
    .step-dot {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: var(--card-hover);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
    }
    
    .step-arrow {
      color: var(--text-dim);
      margin: 0 4px;
    }
    
    /* æ¨¡æ¿åŒºåŸŸ */
    .templates-section {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
      border-radius: 20px;
      padding: 24px;
      margin-bottom: 30px;
    }
    
    .templates-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .templates-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 12px;
    }
    
    .template-card {
      background: var(--card);
      border-radius: 12px;
      padding: 16px;
      cursor: pointer;
      transition: all 0.2s;
      border: 1px solid transparent;
    }
    
    .template-card:hover {
      border-color: var(--primary);
    }
    
    .template-icon {
      font-size: 24px;
      margin-bottom: 8px;
    }
    
    .template-name {
      font-weight: 600;
      margin-bottom: 4px;
      font-size: 14px;
    }
    
    .template-desc {
      font-size: 12px;
      color: var(--text-dim);
    }
    
    /* æ‰§è¡Œå†å² */
    .executions-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .execution-item {
      background: var(--card);
      border-radius: 12px;
      padding: 16px;
      display: flex;
      align-items: center;
      gap: 16px;
    }
    
    .execution-icon {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }
    
    .execution-icon.running {
      background: rgba(102, 126, 234, 0.2);
    }
    
    .execution-icon.completed {
      background: rgba(16, 185, 129, 0.2);
    }
    
    .execution-icon.failed {
      background: rgba(239, 68, 68, 0.2);
    }
    
    .execution-info {
      flex: 1;
    }
    
    .execution-name {
      font-weight: 600;
      margin-bottom: 4px;
    }
    
    .execution-meta {
      font-size: 12px;
      color: var(--text-dim);
    }
    
    .execution-status {
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }
    
    .execution-status.running {
      background: rgba(102, 126, 234, 0.2);
      color: var(--primary);
    }
    
    .execution-status.completed {
      background: rgba(16, 185, 129, 0.2);
      color: var(--success);
    }
    
    .execution-status.failed {
      background: rgba(239, 68, 68, 0.2);
      color: var(--danger);
    }
    
    /* ç©ºçŠ¶æ€ */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-dim);
    }
    
    .empty-icon {
      font-size: 64px;
      margin-bottom: 20px;
    }
    
    .empty-title {
      font-size: 20px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 10px;
    }
    
    @media (max-width: 768px) {
      .toolbar {
        flex-direction: column;
      }
      
      .search-input {
        width: 100%;
      }
      
      .workflows-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ”„ å·¥ä½œæµå¼•æ“</h1>
      <p class="subtitle">è‡ªåŠ¨åŒ–ä»»åŠ¡æµç¨‹ï¼Œæå‡å·¥ä½œæ•ˆç‡</p>
    </header>
    
    <!-- æ ‡ç­¾é¡µ -->
    <div class="tabs">
      <button class="tab active" onclick="switchTab('workflows')">
        ğŸ“‹ æˆ‘çš„å·¥ä½œæµ
      </button>
      <button class="tab" onclick="switchTab('templates')">
        ğŸ“¦ æ¨¡æ¿åº“
      </button>
      <button class="tab" onclick="switchTab('executions')">
        ğŸ“Š æ‰§è¡Œå†å²
      </button>
    </div>
    
    <!-- å·¥å…·æ  -->
    <div class="toolbar">
      <input type="text" class="search-input" placeholder="æœç´¢å·¥ä½œæµ..." id="searchInput" onkeyup="searchWorkflows(event)">
      <button class="btn btn-primary" onclick="showCreateModal()">
        â• åˆ›å»ºå·¥ä½œæµ
      </button>
      <button class="btn btn-secondary" onclick="refreshData()">
        ğŸ”„ åˆ·æ–°
      </button>
    </div>
    
    <!-- æ¨¡æ¿åŒºåŸŸ -->
    <div class="templates-section" id="templatesSection">
      <div class="templates-title">
        ğŸš€ å¿«é€Ÿå¼€å§‹ - ä»æ¨¡æ¿åˆ›å»º
      </div>
      <div class="templates-grid" id="templatesGrid">
        <!-- æ¨¡æ¿ä¼šåŠ¨æ€åŠ è½½ -->
      </div>
    </div>
    
    <!-- å·¥ä½œæµåˆ—è¡¨ -->
    <div class="workflows-grid" id="workflowsGrid">
      <!-- å·¥ä½œæµä¼šåŠ¨æ€åŠ è½½ -->
    </div>
    
    <!-- æ‰§è¡Œå†å² -->
    <div class="executions-list" id="executionsList" style="display: none;">
      <!-- æ‰§è¡Œè®°å½•ä¼šåŠ¨æ€åŠ è½½ -->
    </div>
  </div>
  
  <script>
    // æ¨¡æ‹Ÿæ•°æ® - ç”¨äºé™æ€æµ‹è¯•
    const MOCK_TEMPLATES = [
      {
        id: 'content-publishing',
        name: 'å†…å®¹å‘å¸ƒæµç¨‹',
        description: 'è‡ªåŠ¨åŒ–çš„å†…å®¹åˆ›ä½œåˆ°å‘å¸ƒæµç¨‹',
        icon: 'ğŸ“',
        category: 'productivity',
        steps: [
          { id: 's1', type: 'ai-chat', name: 'AI åˆ›ä½œ' },
          { id: 's2', type: 'approval', name: 'äººå·¥å®¡æ ¸' },
          { id: 's3', type: 'ai-chat', name: 'æ ¼å¼ä¼˜åŒ–' },
          { id: 's4', type: 'webhook', name: 'å‘å¸ƒ' }
        ],
        triggers: ['manual', 'schedule'],
        enabled: true
      },
      {
        id: 'lead-followup',
        name: 'çº¿ç´¢è·Ÿè¿›',
        description: 'è‡ªåŠ¨åŒ–çº¿ç´¢è¯„åˆ†å’Œè·Ÿè¿›æé†’',
        icon: 'ğŸ¯',
        category: 'sales',
        steps: [
          { id: 's1', type: 'ai-analysis', name: 'çº¿ç´¢è¯„åˆ†' },
          { id: 's2', type: 'condition', name: 'è¯„åˆ†åˆ¤æ–­' },
          { id: 's3', type: 'notification', name: 'é«˜ä¼˜å…ˆçº§è·Ÿè¿›' },
          { id: 's4', type: 'notification', name: 'å¸¸è§„è·Ÿè¿›' }
        ],
        triggers: ['new-lead'],
        enabled: true
      },
      {
        id: 'daily-report',
        name: 'æ—¥æŠ¥æ±‡æ€»',
        description: 'è‡ªåŠ¨æ±‡æ€»æ¯æ—¥æ•°æ®å¹¶å‘é€æŠ¥å‘Š',
        icon: 'ğŸ“Š',
        category: 'productivity',
        steps: [
          { id: 's1', type: 'data-fetch', name: 'æ”¶é›†æ•°æ®' },
          { id: 's2', type: 'ai-chat', name: 'ç”ŸæˆæŠ¥å‘Š' },
          { id: 's3', type: 'notification', name: 'å‘é€æŠ¥å‘Š' }
        ],
        triggers: ['schedule'],
        enabled: true
      }
    ];
    
    const MOCK_WORKFLOWS = [
      {
        workflowId: 'wf_demo_1',
        name: 'æˆ‘çš„å†…å®¹å‘å¸ƒæµç¨‹',
        description: 'åŸºäºæ¨¡æ¿åˆ›å»ºçš„å·¥ä½œæµ',
        icon: 'ğŸ“',
        category: 'productivity',
        steps: MOCK_TEMPLATES[0].steps,
        enabled: true,
        createdAt: Date.now() - 86400000
      },
      {
        workflowId: 'wf_demo_2',
        name: 'çº¿ç´¢è‡ªåŠ¨è·Ÿè¿›',
        description: 'é”€å”®çº¿ç´¢è‡ªåŠ¨å¤„ç†',
        icon: 'ğŸ¯',
        category: 'sales',
        steps: MOCK_TEMPLATES[1].steps,
        enabled: true,
        createdAt: Date.now() - 172800000
      }
    ];
    
    const MOCK_EXECUTIONS = [
      {
        executionId: 'exec_1',
        workflowName: 'æˆ‘çš„å†…å®¹å‘å¸ƒæµç¨‹',
        status: 'completed',
        createdAt: Date.now() - 3600000,
        duration: 125
      },
      {
        executionId: 'exec_2',
        workflowName: 'çº¿ç´¢è‡ªåŠ¨è·Ÿè¿›',
        status: 'running',
        createdAt: Date.now() - 60000,
        duration: 0
      },
      {
        executionId: 'exec_3',
        workflowName: 'æ—¥æŠ¥æ±‡æ€»',
        status: 'completed',
        createdAt: Date.now() - 86400000,
        duration: 89
      }
    ];
    
    const STEP_ICONS = {
      'ai-chat': 'ğŸ¤–',
      'ai-analysis': 'ğŸ“ˆ',
      'approval': 'âœ…',
      'condition': 'ğŸ”€',
      'notification': 'ğŸ“±',
      'webhook': 'ğŸ”—',
      'data-fetch': 'ğŸ“¥',
      'delay': 'â°'
    };
    
    let currentTab = 'workflows';
    let workflows = [...MOCK_WORKFLOWS];
    let templates = [...MOCK_TEMPLATES];
    let executions = [...MOCK_EXECUTIONS];
    
    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', () => {
      renderTemplates();
      renderWorkflows();
      renderExecutions();
    });
    
    // åˆ‡æ¢æ ‡ç­¾é¡µ
    function switchTab(tab) {
      currentTab = tab;
      
      document.querySelectorAll('.tab').forEach(t => {
        t.classList.toggle('active', t.textContent.toLowerCase().includes(tab));
      });
      
      document.getElementById('templatesSection').style.display = tab === 'templates' ? 'block' : 'none';
      document.getElementById('workflowsGrid').style.display = tab === 'workflows' ? 'grid' : 'none';
      document.getElementById('executionsList').style.display = tab === 'executions' ? 'flex' : 'none';
    }
    
    // æ¸²æŸ“æ¨¡æ¿
    function renderTemplates() {
      const grid = document.getElementById('templatesGrid');
      
      grid.innerHTML = templates.map(template => `
        <div class="template-card" onclick="createFromTemplate('${template.id}')">
          <div class="template-icon">${template.icon}</div>
          <div class="template-name">${template.name}</div>
          <div class="template-desc">${template.description}</div>
        </div>
      `).join('');
    }
    
    // ä»æ¨¡æ¿åˆ›å»º
    function createFromTemplate(templateId) {
      const template = templates.find(t => t.id === templateId);
      if (!template) return;
      
      const newWorkflow = {
        workflowId: 'wf_' + Date.now(),
        name: template.name,
        description: template.description,
        icon: template.icon,
        category: template.category,
        steps: template.steps.map(s => ({ ...s })),
        enabled: true,
        createdAt: Date.now()
      };
      
      workflows.unshift(newWorkflow);
      renderWorkflows();
      switchTab('workflows');
      alert('âœ… å·¥ä½œæµåˆ›å»ºæˆåŠŸï¼\n\nç‚¹å‡» "â–¶ï¸ æ‰§è¡Œ" æŒ‰é’®æµ‹è¯•è¿è¡Œï¼');
    }
    
    // æ¸²æŸ“å·¥ä½œæµ
    function renderWorkflows() {
      const grid = document.getElementById('workflowsGrid');
      
      if (workflows.length === 0) {
        grid.innerHTML = `
          <div class="empty-state" style="grid-column: 1/-1;">
            <div class="empty-icon">ğŸ“‹</div>
            <div class="empty-title">æš‚æ— å·¥ä½œæµ</div>
            <p>ä»æ¨¡æ¿åº“åˆ›å»ºæˆ–æ‰‹åŠ¨åˆ›å»ºæ–°å·¥ä½œæµ</p>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = workflows.map(workflow => `
        <div class="workflow-card">
          <div class="workflow-header">
            <div class="workflow-icon">${workflow.icon || 'ğŸ“‹'}</div>
            <div class="workflow-info">
              <div class="workflow-name">${workflow.name}</div>
              <div class="workflow-desc">${workflow.description || 'æš‚æ— æè¿°'}</div>
              <span class="workflow-badge ${workflow.enabled ? 'enabled' : 'disabled'}">
                ${workflow.enabled ? 'å·²å¯ç”¨' : 'å·²ç¦ç”¨'}
              </span>
            </div>
          </div>
          <div class="workflow-meta">
            <span>ğŸ“ ${workflow.steps?.length || 0} ä¸ªæ­¥éª¤</span>
            <span>ğŸ·ï¸ ${workflow.category || 'è‡ªå®šä¹‰'}</span>
          </div>
          <div class="workflow-steps">
            ${renderStepPreview(workflow.steps)}
          </div>
          <div style="margin-top: 16px; display: flex; gap: 8px;">
            <button class="btn btn-success" onclick="executeWorkflow('${workflow.workflowId}')" style="flex:1">
              â–¶ï¸ æ‰§è¡Œ
            </button>
            <button class="btn btn-secondary" onclick="viewWorkflow('${workflow.workflowId}')">
              ğŸ‘ï¸ æŸ¥çœ‹
            </button>
          </div>
        </div>
      `).join('');
    }
    
    // æ¸²æŸ“æ­¥éª¤é¢„è§ˆ
    function renderStepPreview(steps) {
      if (!steps || steps.length === 0) return '<span style="color: var(--text-dim)">æ— æ­¥éª¤</span>';
      
      return steps.map((step, i) => `
        <div class="step-dot">${STEP_ICONS[step.type] || 'ğŸ“‹'}</div>
        ${i < steps.length - 1 ? '<span class="step-arrow">â†’</span>' : ''}
      `).join('') + `<span style="margin-left: 8px; color: var(--text-dim); font-size: 12px;">${steps.length} æ­¥</span>`;
    }
    
    // æœç´¢å·¥ä½œæµ
    function searchWorkflows(event) {
      const query = event.target.value.toLowerCase();
      
      if (!query) {
        workflows = [...MOCK_WORKFLOWS];
      } else {
        workflows = MOCK_WORKFLOWS.filter(w => 
          w.name.toLowerCase().includes(query) ||
          w.description?.toLowerCase().includes(query)
        );
      }
      
      renderWorkflows();
    }
    
    // æ‰§è¡Œå·¥ä½œæµ
    function executeWorkflow(workflowId) {
      const workflow = workflows.find(w => w.workflowId === workflowId);
      if (!workflow) return;
      
      const exec = {
        executionId: 'exec_' + Date.now(),
        workflowName: workflow.name,
        status: 'running',
        createdAt: Date.now(),
        duration: 0
      };
      
      executions.unshift(exec);
      renderExecutions();
      switchTab('executions');
      
      alert(`ğŸš€ å¼€å§‹æ‰§è¡Œ: ${workflow.name}\n\nçŠ¶æ€: è¿è¡Œä¸­...\n\n(æ¨¡æ‹Ÿæ‰§è¡Œï¼Œ3ç§’åå®Œæˆ)`);
      
      // æ¨¡æ‹Ÿæ‰§è¡Œå®Œæˆ
      setTimeout(() => {
        exec.status = 'completed';
        exec.duration = Math.floor((Date.now() - exec.createdAt) / 1000);
        renderExecutions();
        alert(`âœ… æ‰§è¡Œå®Œæˆ!\n\nå·¥ä½œæµ: ${workflow.name}\nè€—æ—¶: ${exec.duration}ç§’\n\n(è¿™æ˜¯æ¨¡æ‹Ÿæµ‹è¯•)`);
      }, 3000);
    }
    
    // æŸ¥çœ‹å·¥ä½œæµ
    function viewWorkflow(workflowId) {
      const workflow = workflows.find(w => w.workflowId === workflowId);
      if (!workflow) return;
      
      const stepsText = workflow.steps.map((s, i) => `${i+1}. ${STEP_ICONS[s.type] || 'ğŸ“‹'} ${s.name}`).join('\n');
      
      alert(`ğŸ“‹ ${workflow.name}\n\n${workflow.description}\n\nğŸ“ æ­¥éª¤:\n${stepsText}\n\nçŠ¶æ€: ${workflow.enabled ? 'å·²å¯ç”¨' : 'å·²ç¦ç”¨'}`);
    }
    
    // æ¸²æŸ“æ‰§è¡Œå†å²
    function renderExecutions() {
      const list = document.getElementById('executionsList');
      
      if (executions.length === 0) {
        list.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">ğŸ“Š</div>
            <div class="empty-title">æš‚æ— æ‰§è¡Œè®°å½•</div>
            <p>è¿è¡Œå·¥ä½œæµåä¼šæ˜¾ç¤ºæ‰§è¡Œå†å²</p>
          </div>
        `;
        return;
      }
      
      list.innerHTML = executions.map(exec => `
        <div class="execution-item">
          <div class="execution-icon ${exec.status}">
            ${exec.status === 'running' ? 'ğŸ”„' : exec.status === 'completed' ? 'âœ…' : 'âŒ'}
          </div>
          <div class="execution-info">
            <div class="execution-name">${exec.workflowName}</div>
            <div class="execution-meta">
              å¼€å§‹æ—¶é—´: ${new Date(exec.createdAt).toLocaleString()}
              ${exec.duration ? ` | è€—æ—¶: ${exec.duration}ç§’` : ''}
            </div>
          </div>
          <span class="execution-status ${exec.status}">
            ${exec.status === 'running' ? 'æ‰§è¡Œä¸­' : exec.status === 'completed' ? 'å·²å®Œæˆ' : 'å¤±è´¥'}
          </span>
        </div>
      `).join('');
    }
    
    // æ˜¾ç¤ºåˆ›å»ºæ¨¡æ€æ¡†
    function showCreateModal() {
      alert('ğŸ› ï¸ åˆ›å»ºå·¥ä½œæµåŠŸèƒ½\n\nå»ºè®®ä½¿ç”¨æ¨¡æ¿å¿«é€Ÿåˆ›å»ºï¼š\n\n1. åœ¨"æ¨¡æ¿åº“"é€‰æ‹©ä¸€ä¸ªæ¨¡æ¿\n2. ç‚¹å‡»æ¨¡æ¿å³å¯åˆ›å»ºå·¥ä½œæµ\n3. ç„¶åç‚¹å‡»"æ‰§è¡Œ"æµ‹è¯•');
    }
    
    // åˆ·æ–°æ•°æ®
    function refreshData() {
      workflows = [...MOCK_WORKFLOWS];
      renderWorkflows();
      renderExecutions();
      alert('âœ… æ•°æ®å·²åˆ·æ–°ï¼');
    }
  </script>
</body>
</html>
