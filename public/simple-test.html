<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ç®€å•æµ‹è¯•</title>
</head>
<body style="background: #1a1a1a; color: #fff; font-family: monospace; padding: 20px;">
  <h2>ğŸ§ª ç®€å•å‘½ä»¤æµ‹è¯•</h2>
  
  <button onclick="test1()" style="padding: 10px 20px; margin: 5px;">æµ‹è¯• 1: whoami</button>
  <button onclick="test2()" style="padding: 10px 20px; margin: 5px;">æµ‹è¯• 2: pwd</button>
  <button onclick="test3()" style="padding: 10px 20px; margin: 5px;">æµ‹è¯• 3: echo hello</button>
  <button onclick="test4()" style="padding: 10px 20px; margin: 5px;">æµ‹è¯• 4: mkdir testfolder</button>
  
  <pre id="output" style="background: #0d0d0d; padding: 15px; margin-top: 20px; border-radius: 5px;"></pre>
  
  <script>
    async function test1() {
      show('æ‰§è¡Œ: whoami');
      try {
        const res = await fetch('/api/execute', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({command: 'whoami'})
        });
        const data = await res.json();
        showResult(data);
      } catch (e) {
        show('é”™è¯¯: ' + e.message);
      }
    }
    
    async function test2() {
      show('æ‰§è¡Œ: pwd');
      try {
        const res = await fetch('/api/execute', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({command: 'pwd'})
        });
        const data = await res.json();
        showResult(data);
      } catch (e) {
        show('é”™è¯¯: ' + e.message);
      }
    }
    
    async function test3() {
      show('æ‰§è¡Œ: echo hello world');
      try {
        const res = await fetch('/api/execute', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({command: 'echo hello world'})
        });
        const data = await res.json();
        showResult(data);
      } catch (e) {
        show('é”™è¯¯: ' + e.message);
      }
    }
    
    async function test4() {
      show('æ‰§è¡Œ: mkdir testfolder123');
      try {
        const res = await fetch('/api/execute', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({command: 'mkdir testfolder123'})
        });
        const data = await res.json();
        showResult(data);
      } catch (e) {
        show('é”™è¯¯: ' + e.message);
      }
    }
    
    function show(msg) {
      document.getElementById('output').textContent = msg + '\n\næ‰§è¡Œä¸­...';
    }
    
    function showResult(data) {
      let text = '';
      if (data.parsedCommand) {
        text += 'è§£æå‘½ä»¤: ' + data.parsedCommand + '\n';
      }
      text += 'æˆåŠŸ: ' + (data.success ? 'æ˜¯' : 'å¦') + '\n';
      if (data.success) {
        text += 'è¾“å‡º: ' + (data.output || '(ç©º)');
      } else {
        text += 'é”™è¯¯: ' + (data.error || 'æœªçŸ¥');
      }
      document.getElementById('output').textContent = text;
    }
  </script>
</body>
</html>
