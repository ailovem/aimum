<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AImum Core - ç›®æ ‡é©±åŠ¨çš„ä»»åŠ¡è‡ªåŠ¨åŒ–</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
      --primary: #667eea;
      --bg: #0f0f23;
      --card: #1a1a2e;
      --card-hover: #252542;
      --text: #e2e8f0;
      --text-dim: #a0aec0;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --border: rgba(255,255,255,0.1);
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    header {
      padding: 40px 20px;
      margin-bottom: 30px;
    }
    
    h1 {
      font-size: 36px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .subtitle {
      color: var(--text-dim);
      font-size: 18px;
    }
    
    /* èŠå¤©åŒºåŸŸ */
    .chat-section {
      background: var(--card);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 30px;
    }
    
    .chat-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 1px solid var(--border);
    }
    
    .ai-avatar {
      width: 56px;
      height: 56px;
      background: linear-gradient(135deg, var(--primary), #764ba2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
    }
    
    .ai-info h2 {
      font-size: 20px;
      margin-bottom: 4px;
    }
    
    .ai-info p {
      color: var(--text-dim);
      font-size: 14px;
    }
    
    .input-area {
      display: flex;
      gap: 12px;
      margin-bottom: 20px;
    }
    
    .chat-input {
      flex: 1;
      padding: 16px 20px;
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--border);
      border-radius: 16px;
      color: var(--text);
      font-size: 16px;
      resize: none;
      min-height: 60px;
    }
    
    .chat-input:focus {
      outline: none;
      border-color: var(--primary);
    }
    
    .send-btn {
      padding: 16px 32px;
      background: var(--primary);
      border: none;
      border-radius: 16px;
      color: white;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .send-btn:hover {
      background: #5a67d8;
    }
    
    .send-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .examples {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    
    .example-btn {
      padding: 8px 16px;
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--border);
      border-radius: 20px;
      color: var(--text-dim);
      font-size: 13px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .example-btn:hover {
      background: var(--card-hover);
      color: var(--text);
    }
    
    /* ä»»åŠ¡åˆ—è¡¨ */
    .tasks-section {
      background: var(--card);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 30px;
    }
    
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .section-title {
      font-size: 20px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .task-count {
      padding: 4px 12px;
      background: var(--primary);
      border-radius: 20px;
      font-size: 12px;
    }
    
    .task-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .task-item {
      background: rgba(255,255,255,0.03);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      display: flex;
      align-items: center;
      gap: 16px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .task-item:hover {
      border-color: var(--primary);
      background: rgba(255,255,255,0.05);
    }
    
    .task-status {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      flex-shrink: 0;
    }
    
    .task-status.pending { background: var(--warning); }
    .task-status.running { background: var(--primary); animation: pulse 1s infinite; }
    .task-status.completed { background: var(--success); }
    .task-status.failed { background: var(--danger); }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .task-content {
      flex: 1;
    }
    
    .task-name {
      font-weight: 600;
      margin-bottom: 4px;
    }
    
    .task-meta {
      display: flex;
      gap: 16px;
      font-size: 12px;
      color: var(--text-dim);
    }
    
    .task-progress {
      width: 100px;
      height: 6px;
      background: var(--card-hover);
      border-radius: 3px;
      overflow: hidden;
    }
    
    .task-progress-fill {
      height: 100%;
      background: var(--primary);
      border-radius: 3px;
      transition: width 0.3s;
    }
    
    /* æ¶ˆæ¯å†å² */
    .messages-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-height: 400px;
      overflow-y: auto;
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid var(--border);
    }
    
    .message-item {
      display: flex;
      gap: 12px;
      padding: 12px;
      background: rgba(255,255,255,0.03);
      border-radius: 12px;
    }
    
    .message-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      flex-shrink: 0;
    }
    
    .message-avatar.user {
      background: var(--card-hover);
    }
    
    .message-avatar.ai {
      background: linear-gradient(135deg, var(--primary), #764ba2);
    }
    
    .message-content {
      flex: 1;
    }
    
    .message-role {
      font-weight: 600;
      margin-bottom: 4px;
      font-size: 13px;
    }
    
    .message-text {
      font-size: 14px;
      line-height: 1.6;
    }
    
    /* åˆ†æé¢æ¿ */
    .analysis-panel {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-top: 20px;
    }
    
    .analysis-card {
      background: rgba(255,255,255,0.03);
      border-radius: 12px;
      padding: 16px;
    }
    
    .analysis-label {
      font-size: 12px;
      color: var(--text-dim);
      margin-bottom: 8px;
    }
    
    .analysis-value {
      font-size: 16px;
      font-weight: 600;
    }
    
    .analysis-value.highlight {
      color: var(--primary);
    }
    
    /* ç»Ÿè®¡ */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .stat-card {
      background: var(--card);
      border-radius: 16px;
      padding: 24px;
      text-align: center;
    }
    
    .stat-icon {
      font-size: 36px;
      margin-bottom: 12px;
    }
    
    .stat-value {
      font-size: 36px;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 8px;
    }
    
    .stat-label {
      color: var(--text-dim);
      font-size: 14px;
    }
    
    /* ç©ºçŠ¶æ€ */
    .empty-state {
      text-align: center;
      padding: 40px;
      color: var(--text-dim);
    }
    
    .empty-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }
    
    /* æ­¥éª¤æ˜¾ç¤º */
    .steps-list {
      margin-top: 16px;
    }
    
    .step-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }
    
    .step-item:last-child {
      border-bottom: none;
    }
    
    .step-number {
      width: 28px;
      height: 28px;
      background: var(--primary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 600;
      flex-shrink: 0;
    }
    
    .step-content {
      flex: 1;
    }
    
    .step-name {
      font-weight: 600;
      margin-bottom: 4px;
    }
    
    .step-desc {
      font-size: 13px;
      color: var(--text-dim);
    }
    
    @media (max-width: 768px) {
      .stats-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .input-area {
        flex-direction: column;
      }
      
      .send-btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ¦ AImum Core</h1>
      <p class="subtitle">ç›®æ ‡é©±åŠ¨çš„ä»»åŠ¡è‡ªåŠ¨åŒ–ç³»ç»Ÿ - ä¸€ä¸ªäººçœŸæ­£åšåˆ°å…¨é¢è‡ªåŠ¨åŒ–</p>
    </header>
    
    <!-- ç»Ÿè®¡ -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">ğŸ“‹</div>
        <div class="stat-value" id="totalTasks">0</div>
        <div class="stat-label">æ€»ä»»åŠ¡æ•°</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">âœ…</div>
        <div class="stat-value" id="completedTasks">0</div>
        <div class="stat-label">å·²å®Œæˆ</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ğŸ”„</div>
        <div class="stat-value" id="runningTasks">0</div>
        <div class="stat-label">æ‰§è¡Œä¸­</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ğŸ“ˆ</div>
        <div class="stat-value" id="successRate">0%</div>
        <div class="stat-label">æˆåŠŸç‡</div>
      </div>
    </div>
    
    <!-- AI å¯¹è¯ -->
    <div class="chat-section">
      <div class="chat-header">
        <div class="ai-avatar">ğŸ¦</div>
        <div class="ai-info">
          <h2>AImum Core</h2>
          <p>ç›®æ ‡ç†è§£ Â· ä»»åŠ¡ç®¡ç† Â· è‡ªåŠ¨åŒ–æ‰§è¡Œ</p>
        </div>
      </div>
      
      <div class="input-area">
        <textarea class="chat-input" id="chatInput" placeholder="å‘Šè¯‰æˆ‘ä½ çš„ç›®æ ‡ï¼Œæˆ‘ä¼šå¸®ä½ è§„åˆ’å¹¶æ‰§è¡Œ..." rows="2"></textarea>
        <button class="send-btn" onclick="sendMessage()" id="sendBtn">ğŸš€ æ‰§è¡Œ</button>
      </div>
      
      <div class="examples">
        <button class="example-btn" onclick="setExample('å¸®æˆ‘æ•´ç†æ¡Œé¢ä¸Šçš„æ–‡ä»¶')">å¸®æˆ‘æ•´ç†æ¡Œé¢ä¸Šçš„æ–‡ä»¶</button>
        <button class="example-btn" onclick="setExample('å¸®æˆ‘å†™ä¸€å°é‚®ä»¶ç»™å®¢æˆ·')">å¸®æˆ‘å†™ä¸€å°é‚®ä»¶</button>
        <button class="example-btn" onclick="setExample('æœç´¢æœ€æ–°çš„ AI æ–°é—»')">æœç´¢ AI æ–°é—»</button>
        <button class="example-btn" onclick="setExample('åˆ†æè¿™ä¸ªæœˆçš„é”€å”®æ•°æ®')">åˆ†æé”€å”®æ•°æ®</button>
      </div>
      
      <!-- åˆ†æé¢æ¿ -->
      <div class="analysis-panel" id="analysisPanel" style="display: none;">
        <div class="analysis-card">
          <div class="analysis-label">æ„å›¾</div>
          <div class="analysis-value highlight" id="analysisIntent">-</div>
        </div>
        <div class="analysis-card">
          <div class="analysis-label">ä»»åŠ¡ç±»å‹</div>
          <div class="analysis-value" id="analysisType">-</div>
        </div>
        <div class="analysis-card">
          <div class="analysis-label">ä¼˜å…ˆçº§</div>
          <div class="analysis-value" id="analysisPriority">-</div>
        </div>
        <div class="analysis-card">
          <div class="analysis-label">é¢„è®¡æ—¶é—´</div>
          <div class="analysis-value" id="analysisTime">-</div>
        </div>
      </div>
      
      <!-- æ­¥éª¤é¢„è§ˆ -->
      <div id="stepsPreview" style="display: none; margin-top: 20px;">
        <h3 style="margin-bottom: 12px;">ğŸ“‹ ä»»åŠ¡æ­¥éª¤</h3>
        <div class="steps-list" id="stepsList"></div>
      </div>
      
      <!-- æ¶ˆæ¯å†å² -->
      <div class="messages-list" id="messagesList">
        <div class="empty-state">
          <div class="empty-icon">ğŸ’¬</div>
          <div>å‘é€æ¶ˆæ¯å¼€å§‹å¯¹è¯</div>
        </div>
      </div>
    </div>
    
    <!-- ä»»åŠ¡åˆ—è¡¨ -->
    <div class="tasks-section">
      <div class="section-header">
        <div class="section-title">
          ğŸ“‹ ä»»åŠ¡ç®¡ç†
          <span class="task-count" id="taskCount">0</span>
        </div>
        <button class="example-btn" onclick="clearAllTasks()">æ¸…ç©º</button>
      </div>
      
      <div class="task-list" id="taskList">
        <div class="empty-state">
          <div class="empty-icon">ğŸ“‹</div>
          <div>æš‚æ— ä»»åŠ¡</div>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    // æ¨¡æ‹Ÿæ•°æ®
    const TASK_TYPES = {
      ORGANIZE: 'æ•´ç†',
      CREATE: 'åˆ›å»º',
      SEARCH: 'æœç´¢',
      ANALYZE: 'åˆ†æ',
      COMMUNICATE: 'æ²Ÿé€š',
      AUTOMATE: 'è‡ªåŠ¨åŒ–',
      MONITOR: 'ç›‘æ§',
      REPORT: 'æŠ¥å‘Š'
    };
    
    const PRIORITIES = {
      CRITICAL: 'ç´§æ€¥',
      HIGH: 'é«˜',
      MEDIUM: 'ä¸­',
      LOW: 'ä½'
    };
    
    const STATUS_CONFIG = {
      pending: { label: 'å¾…æ‰§è¡Œ', class: 'pending' },
      running: { label: 'æ‰§è¡Œä¸­', class: 'running' },
      completed: { label: 'å·²å®Œæˆ', class: 'completed' },
      failed: { label: 'å¤±è´¥', class: 'failed' }
    };
    
    let tasks = [];
    let messages = [];
    let taskIdCounter = 0;
    
    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', () => {
      updateStats();
      
      // æ·»åŠ ä¸€äº›ç¤ºä¾‹ä»»åŠ¡
      addDemoTasks();
    });
    
    // æ·»åŠ ç¤ºä¾‹ä»»åŠ¡
    function addDemoTasks() {
      const demos = [
        {
          name: 'æ•´ç†æ¡Œé¢æ–‡ä»¶',
          type: TASK_TYPES.ORGANIZE,
          status: 'completed',
          progress: 100
        },
        {
          name: 'å‘é€é¡¹ç›®æ›´æ–°é‚®ä»¶',
          type: TASK_TYPES.COMMUNICATE,
          status: 'running',
          progress: 60
        },
        {
          name: 'æœç´¢ç«å“åˆ†ææŠ¥å‘Š',
          type: TASK_TYPES.SEARCH,
          status: 'pending',
          progress: 0
        }
      ];
      
      demos.forEach(demo => {
        tasks.push({
          id: 'task_demo_' + Date.now(),
          name: demo.name,
          type: demo.type,
          status: demo.status,
          progress: demo.progress,
          createdAt: Date.now() - Math.random() * 86400000
        });
      });
      
      renderTasks();
      updateStats();
    }
    
    // è®¾ç½®ç¤ºä¾‹
    function setExample(text) {
      document.getElementById('chatInput').value = text;
      sendMessage();
    }
    
    // å‘é€æ¶ˆæ¯
    function sendMessage() {
      const input = document.getElementById('chatInput');
      const text = input.value.trim();
      
      if (!text) return;
      
      // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
      addMessage('user', text);
      input.value = '';
      
      // ç¦ç”¨æŒ‰é’®
      document.getElementById('sendBtn').disabled = true;
      
      // åˆ†ææ„å›¾
      setTimeout(() => {
        const understanding = analyzeGoal(text);
        showUnderstanding(understanding);
        
        // ç”Ÿæˆä»»åŠ¡æ­¥éª¤
        const steps = generateSteps(text, understanding);
        showSteps(steps);
        
        // åˆ›å»ºä»»åŠ¡
        createTaskFromGoal(text, understanding, steps);
        
        // AI å›å¤
        setTimeout(() => {
          addMessage('ai', generateResponse(text, understanding, steps));
          document.getElementById('sendBtn').disabled = false;
        }, 1000);
      }, 500);
    }
    
    // åˆ†æç›®æ ‡
    function analyzeGoal(text) {
      const lowerText = text.toLowerCase();
      
      // æ„å›¾è¯†åˆ«
      let intent = 'task';
      if (lowerText.includes('æ˜¯ä»€ä¹ˆ') || lowerText.includes('æ€ä¹ˆ')) {
        intent = 'query';
      } else if (lowerText.includes('è®¡åˆ’') || lowerText.includes('å®‰æ’')) {
        intent = 'planning';
      }
      
      // ä»»åŠ¡ç±»å‹
      let type = TASK_TYPES.CREATE;
      if (lowerText.includes('æ•´ç†') || lowerText.includes('åˆ†ç±»')) {
        type = TASK_TYPES.ORGANIZE;
      } else if (lowerText.includes('æœç´¢') || lowerText.includes('æŸ¥æ‰¾')) {
        type = TASK_TYPES.SEARCH;
      } else if (lowerText.includes('åˆ†æ')) {
        type = TASK_TYPES.ANALYZE;
      } else if (lowerText.includes('é‚®ä»¶') || lowerText.includes('å‘é€')) {
        type = TASK_TYPES.COMMUNICATE;
      }
      
      // ä¼˜å…ˆçº§
      let priority = PRIORITIES.MEDIUM;
      if (lowerText.includes('ç´§æ€¥') || lowerText.includes('é©¬ä¸Š')) {
        priority = PRIORITIES.CRITICAL;
      } else if (lowerText.includes('ä¸æ€¥')) {
        priority = PRIORITIES.LOW;
      }
      
      // é¢„è®¡æ—¶é—´
      let estimatedTime = '5-10åˆ†é’Ÿ';
      if (type === TASK_TYPES.ANALYZE) {
        estimatedTime = '15-30åˆ†é’Ÿ';
      } else if (type === TASK_TYPES.SEARCH) {
        estimatedTime = '3-5åˆ†é’Ÿ';
      }
      
      return { intent, type, priority, estimatedTime };
    }
    
    // æ˜¾ç¤ºåˆ†æç»“æœ
    function showUnderstanding(understanding) {
      document.getElementById('analysisPanel').style.display = 'grid';
      
      document.getElementById('analysisIntent').textContent = understanding.intent === 'task' ? 'æ‰§è¡Œä»»åŠ¡' : 'æŸ¥è¯¢';
      document.getElementById('analysisType').textContent = understanding.type;
      document.getElementById('analysisPriority').textContent = understanding.priority;
      document.getElementById('analysisTime').textContent = understanding.estimatedTime;
    }
    
    // ç”Ÿæˆæ­¥éª¤
    function generateSteps(text, understanding) {
      const steps = [];
      
      switch (understanding.type) {
        case TASK_TYPES.ORGANIZE:
          steps.push(
            { name: 'æ‰«æç›®æ ‡ä½ç½®', desc: 'æŸ¥æ‰¾éœ€è¦æ•´ç†çš„æ–‡ä»¶', time: '1-2åˆ†é’Ÿ' },
            { name: 'åˆ†ç±»æ•´ç†', desc: 'æŒ‰ç±»å‹åˆ†ç»„', time: '3-10åˆ†é’Ÿ' },
            { name: 'å®Œæˆæ•´ç†', desc: 'ç¡®è®¤ç»“æœ', time: '1åˆ†é’Ÿ' }
          );
          break;
          
        case TASK_TYPES.CREATE:
          steps.push(
            { name: 'å‡†å¤‡å†…å®¹', desc: 'ç¡®å®šåˆ›å»ºæ–¹å‘', time: '2åˆ†é’Ÿ' },
            { name: 'åˆ›å»ºå†…å®¹', desc: 'ç”Ÿæˆç›®æ ‡å†…å®¹', time: '5-15åˆ†é’Ÿ' },
            { name: 'ä¿å­˜ç»“æœ', desc: 'ä¿å­˜åˆ°æŒ‡å®šä½ç½®', time: '1åˆ†é’Ÿ' }
          );
          break;
          
        case TASK_TYPES.SEARCH:
          steps.push(
            { name: 'åˆ†ææœç´¢éœ€æ±‚', desc: 'ç†è§£æœç´¢ç›®æ ‡', time: '1åˆ†é’Ÿ' },
            { name: 'æ‰§è¡Œæœç´¢', desc: 'æœç´¢ç›¸å…³å†…å®¹', time: '2-5åˆ†é’Ÿ' },
            { name: 'æ•´ç†ç»“æœ', desc: 'ç­›é€‰å’Œæ•´ç†', time: '2åˆ†é’Ÿ' }
          );
          break;
          
        case TASK_TYPES.ANALYZE:
          steps.push(
            { name: 'æ”¶é›†æ•°æ®', desc: 'è·å–åˆ†ææ‰€éœ€æ•°æ®', time: '5åˆ†é’Ÿ' },
            { name: 'æ•°æ®åˆ†æ', desc: 'æ·±å…¥åˆ†æ', time: '10-20åˆ†é’Ÿ' },
            { name: 'ç”ŸæˆæŠ¥å‘Š', desc: 'è¾“å‡ºåˆ†æç»“è®º', time: '5åˆ†é’Ÿ' }
          );
          break;
          
        default:
          steps.push(
            { name: 'å‡†å¤‡', desc: 'ç†è§£ä»»åŠ¡éœ€æ±‚', time: '2åˆ†é’Ÿ' },
            { name: 'æ‰§è¡Œ', desc: 'å®Œæˆä¸»è¦ä»»åŠ¡', time: '10åˆ†é’Ÿ' },
            { name: 'äº¤ä»˜', desc: 'æä¾›ç»“æœ', time: '2åˆ†é’Ÿ' }
          );
      }
      
      return steps;
    }
    
    // æ˜¾ç¤ºæ­¥éª¤
    function showSteps(steps) {
      document.getElementById('stepsPreview').style.display = 'block';
      
      const html = steps.map((step, i) => `
        <div class="step-item">
          <div class="step-number">${i + 1}</div>
          <div class="step-content">
            <div class="step-name">${step.name}</div>
            <div class="step-desc">${step.desc} Â· ${step.time}</div>
          </div>
        </div>
      `).join('');
      
      document.getElementById('stepsList').innerHTML = html;
    }
    
    // ä»ç›®æ ‡åˆ›å»ºä»»åŠ¡
    function createTaskFromGoal(text, understanding, steps) {
      taskIdCounter++;
      
      const task = {
        id: 'task_' + Date.now(),
        name: text.substring(0, 30) + (text.length > 30 ? '...' : ''),
        type: understanding.type,
        status: 'pending',
        progress: 0,
        steps: steps.length,
        createdAt: Date.now()
      };
      
      tasks.unshift(task);
      renderTasks();
      updateStats();
      
      // æ¨¡æ‹Ÿæ‰§è¡Œ
      simulateExecution(task.id);
    }
    
    // æ¨¡æ‹Ÿæ‰§è¡Œ
    function simulateExecution(taskId) {
      const task = tasks.find(t => t.id === taskId);
      if (!task) return;
      
      task.status = 'running';
      renderTasks();
      updateStats();
      
      // é€æ­¥å®Œæˆ
      let progress = 0;
      const interval = setInterval(() => {
        progress += Math.floor(Math.random() * 15) + 5;
        
        if (progress >= 100) {
          progress = 100;
          task.status = 'completed';
          clearInterval(interval);
        }
        
        task.progress = progress;
        renderTasks();
        updateStats();
      }, 500);
    }
    
    // ç”Ÿæˆ AI å›å¤
    function generateResponse(text, understanding, steps) {
      const responses = {
        'organize': `å¥½çš„ï¼æˆ‘æ¥å¸®ä½ æ•´ç†ã€‚

ğŸ“‹ ä»»åŠ¡æ­¥éª¤ï¼š
${steps.map((s, i) => `  ${i + 1}. ${s.name} (${s.time})`).join('\n')}

ğŸš€ å¼€å§‹æ‰§è¡Œ...`,
        
        'create': `æ˜ç™½äº†ï¼æˆ‘æ¥å¸®ä½ åˆ›å»ºã€‚

ğŸ“‹ æ‰§è¡Œè®¡åˆ’ï¼š
${steps.map((s, i) => `  ${i + 1}. ${s.name} (${s.time})`).join('\n')}

ğŸš€ å¼€å§‹...`,
        
        'search': `å¥½çš„ï¼Œæˆ‘æ¥å¸®ä½ æœç´¢ï¼

ğŸ“‹ æœç´¢æ­¥éª¤ï¼š
${steps.map((s, i) => `  ${i + 1}. ${s.name} (${s.time})`).join('\n')}

ğŸ” æ­£åœ¨æœç´¢...`,
        
        'analyze': `æ”¶åˆ°ï¼å¼€å§‹åˆ†æã€‚

ğŸ“‹ åˆ†ææ­¥éª¤ï¼š
${steps.map((s, i) => `  ${i + 1}. ${s.name} (${s.time})`).join('\n')}

ğŸ“Š å¼€å§‹æ·±åº¦åˆ†æ...`
      };
      
      return responses[understanding.type.toLowerCase()] || `å¥½çš„ï¼Œæˆ‘æ¥å¸®ä½ å¤„ç†è¿™ä¸ªä»»åŠ¡ï¼

ğŸ“‹ æ‰§è¡Œæ­¥éª¤ï¼š
${steps.map((s, i) => `  ${i + 1}. ${s.name}`).join('\n')}

ğŸš€ å¼€å§‹æ‰§è¡Œ...`;
    }
    
    // æ·»åŠ æ¶ˆæ¯
    function addMessage(role, text) {
      messages.push({ role, text, time: Date.now() });
      renderMessages();
    }
    
    // æ¸²æŸ“æ¶ˆæ¯
    function renderMessages() {
      const list = document.getElementById('messagesList');
      
      if (messages.length === 0) {
        list.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">ğŸ’¬</div>
            <div>å‘é€æ¶ˆæ¯å¼€å§‹å¯¹è¯</div>
          </div>
        `;
        return;
      }
      
      list.innerHTML = messages.map(msg => `
        <div class="message-item">
          <div class="message-avatar ${msg.role}">${msg.role === 'user' ? 'ğŸ‘¤' : 'ğŸ¦'}</div>
          <div class="message-content">
            <div class="message-role">${msg.role === 'user' ? 'ä½ ' : 'AImum'}</div>
            <div class="message-text">${msg.text.replace(/\n/g, '<br>')}</div>
          </div>
        </div>
      `).join('');
      
      // æ»šåŠ¨åˆ°åº•éƒ¨
      list.scrollTop = list.scrollHeight;
    }
    
    // æ¸²æŸ“ä»»åŠ¡
    function renderTasks() {
      const list = document.getElementById('taskList');
      
      if (tasks.length === 0) {
        list.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">ğŸ“‹</div>
            <div>æš‚æ— ä»»åŠ¡</div>
          </div>
        `;
        return;
      }
      
      list.innerHTML = tasks.map(task => `
        <div class="task-item" onclick="viewTask('${task.id}')">
          <div class="task-status ${STATUS_CONFIG[task.status]?.class || 'pending'}"></div>
          <div class="task-content">
            <div class="task-name">${task.name}</div>
            <div class="task-meta">
              <span>${TASK_TYPES[task.type.toUpperCase()] || task.type}</span>
              <span>${STATUS_CONFIG[task.status]?.label || task.status}</span>
            </div>
          </div>
          <div class="task-progress">
            <div class="task-progress-fill" style="width: ${task.progress}%"></div>
          </div>
        </div>
      `).join('');
      
      document.getElementById('taskCount').textContent = tasks.length;
    }
    
    // æŸ¥çœ‹ä»»åŠ¡
    function viewTask(taskId) {
      const task = tasks.find(t => t.id === taskId);
      if (!task) return;
      
      alert(`ğŸ“‹ ${task.name}\n\nçŠ¶æ€: ${STATUS_CONFIG[task.status]?.label}\nç±»å‹: ${TASK_TYPES[task.type.toUpperCase()] || task.type}\nè¿›åº¦: ${task.progress}%`);
    }
    
    // æ¸…ç©ºä»»åŠ¡
    function clearAllTasks() {
      if (confirm('ç¡®å®šæ¸…ç©ºæ‰€æœ‰ä»»åŠ¡å—ï¼Ÿ')) {
        tasks = [];
        renderTasks();
        updateStats();
      }
    }
    
    // æ›´æ–°ç»Ÿè®¡
    function updateStats() {
      const total = tasks.length;
      const completed = tasks.filter(t => t.status === 'completed').length;
      const running = tasks.filter(t => t.status === 'running').length;
      const failed = tasks.filter(t => t.status === 'failed').length;
      const successRate = total > 0 ? Math.round((completed / (completed + failed || 1)) * 100) : 0;
      
      document.getElementById('totalTasks').textContent = total;
      document.getElementById('completedTasks').textContent = completed;
      document.getElementById('runningTasks').textContent = running;
      document.getElementById('successRate').textContent = successRate + '%';
    }
    
    // å›è½¦å‘é€
    document.getElementById('chatInput').addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });
  </script>
</body>
</html>
